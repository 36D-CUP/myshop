{extend name='Indexpublic:index'}
{block name='body'}
<div class="row">
    <div class="col-sm-12">
        <section class="panel">
            <header class="panel-heading">
                Dynamic Table
<!-- <span class="tools pull-right">
<a href="javascript:;" class="fa fa-chevron-down"></a>收起
<a href="javascript:;" class="fa fa-times"></a>关闭
</span> -->
</header>
<div class="panel-body">
    <div class="row">
        <div class="col-lg-3" style = 'float:left'>
            <select class="selectpicker form-control" id = 'data_num' style = 'width: 80px;padding:0px !important;cursor:pointer;float:left;margin-right: 10px;'>
                <option value="10" {if condition="($data_num==10)"}selected{/if}>10</option>
                <option value="15" {if condition="($data_num==15)"}selected{/if}>15</option>
                <option value="20" {if condition="($data_num==20)"}selected{/if}>20</option>
                <option value="x" {if condition="($data_num==x)"}selected{/if}>全部</option>
            </select>
            <p style = 'line-height: 35px;'>
                显示条数
            </p>
        </div>
        <div class="col-lg-3" style='float:right;margin-bottom: 10px;'>
            <form action = '' method="get">
                <div class="">
                    <select class="selectpicker form-control" name = 'search_type' style = 'width: 70px;padding:0px !important;cursor:pointer;float: left'>
                        <option value = 'id'          {if condition="($s_ty == 'id')"}          selected{/if}> 系统Id     					</option>
                        <option value = 'wx_name'  	  {if condition="($s_ty == 'wx_name')"} 	selected{/if}> 微信名称 						</option>
                        <option value = 'name'        {if condition="($s_ty == 'name')"} 		selected{/if}> 真实姓名  					</option>
                        <option value = 'is_status'   {if condition="($s_ty == 'is_status')"} 	selected{/if}> 用户暂停状态(1为正常,2为暂停)  </option>
                        <option value = 'stop_time'   {if condition="($s_ty == 'stop_time')"}   selected{/if}> 是否会员(1为会员,2为非会员)	</option>
                    </select>
                    <input type="text" name = 'search_value' value = '{$s_val}' class = 'form-control' style = 'width: 180px;float: left;margin:0 5px;'>
                    <input type="hidden" value = '1' name = 'type'>
                    <button class = 'btn btn-default' style = 'float: left'>查询</button>
                </div>
            </form>
        </div>
    </div>
    <div class="adv-table">
        <table  class="display table table-bordered table-striped" id="dynamic-table">
            <thead>
                <tr>
                    <th>系统ID</th>
                    <th>管理员头像</th>
                    <th>管理员昵称</th>
                    <th>账号</th>
                    <th>权限等级</th>
                    <th>状态</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody>
                {volist name='row' id='admin'}
                <tr class="gradeX">
                    <td>{$admin.id}</td>
                    <td>img</td>
                    <td>{$admin.admin_name}</td>
                    <td>{$admin.admin_user}</td>
                    <td>{$admin.level}</td>
                    <td>{$admin.status}</td>
                    <td>操作</td>
                </tr>
                {/volist}
            </tbody>
            <tfoot>
                <tr>
                    <th>系统ID</th>
                    <th>管理员头像</th>
                    <th>管理员昵称</th>
                    <th>账号</th>
                    <th>权限等级</th>
                    <th>状态</th>
                    <th>操作</th>
                </tr>
            </tfoot>
        </table>
        <!--分页-->
        <div class="row">
            <div class="col-lg-6">
                <div class="dataTables_info" id="editable-sample_info">
                    <div class="dataTables_paginate paging_bootstrap pagination" id = 'page'>

                        <ul>
                            <li><a  class="prev" name = '1'>← 第一页</a></li>
                            {for start="$pros" end="$proe"}
                            <li ><a  {if condition="($pro == $i)"} style = 'background: #65cea7;color:#fff'{/if} name = '{$i}'>{$i}</a></li>
                            {/for}
                            <li ><a class="next" name = '{$page}'>最后一页 → </a></li>
                            <li style = 'height:32px;line-height: 32px;padding:0 10px; '>总页数:{$page}</li>
                            <li style = 'height:32px;line-height: 32px;padding:0 10px; '>总条数:{$nums}</li>
                        </ul>

                    </div>
                </div>
            </div>
        </div>
        <!--分页 end-->
    </div>

</div>
</section>
</div>
</div>
<script type="text/javascript">
    // 分页
    $("#page").on('click','li a',function(){
      var pro = $(this).attr('name');
      var search_type = "{$Request.param.search_type}";
      var search_value = "{$Request.param.search_value}";
      var type = "{$Request.param.type}";         //通过自定义函数getUrlParam(key);获取地址栏的参数
      window.location.href='/{$tables}/{$tables}?pro='+pro+'&search_type='+search_type+'&search_value='+search_value+'&type='+type;
    });
    
</script>
{/block}